/*
 * Copyright 2024 Universit√© Gustave Eiffel
 * SPDX-License-Identifier: Apache-2.0
 */

#include <arm64/armv8-a.dtsi>
#include <zephyr/dt-bindings/interrupt-controller/arm-gic.h>
#include <dt-bindings/clock/rk3588-cru.h>
#include <zephyr/dt-bindings/pinctrl/rockchip.h>

#include <mem.h>

/ {
	#address-cells = <1>;
	#size-cells = <1>;

	cpus {
		#address-cells = <1>;
		#size-cells = <0>;

		cpu@0 {
			device_type = "cpu";
			compatible = "arm,cortex-a55";
			enable-method = "psci";
			reg = <0x000>;
		};

		cpu@100 {
			device_type = "cpu";
			compatible = "arm,cortex-a55";
			enable-method = "psci";
			reg = <0x100>;
		};

		cpu@200 {
			device_type = "cpu";
			compatible = "arm,cortex-a55";
			enable-method = "psci";
			reg = <0x200>;
		};

		cpu@300 {
			device_type = "cpu";
			compatible = "arm,cortex-a55";
			enable-method = "psci";
			reg = <0x300>;
		};

		cpu@400 {
			device_type = "cpu";
			compatible = "arm,cortex-a76";
			reg = <0x400>;
		};

		cpu@500 {
			device_type = "cpu";
			compatible = "arm,cortex-a76";
			reg = <0x500>;
		};

		cpu@600 {
			device_type = "cpu";
			compatible = "arm,cortex-a76";
			reg = <0x600>;
		};

		cpu@700 {
			device_type = "cpu";
			compatible = "arm,cortex-a76";
			reg = <0x700>;
		};
	};

	cru: clock-controller@fd7c0000 {
		compatible = "rockchip,rk3588-cru";
		reg = <0xfd7c0000 0x1000>;
		#clock-cells = <1>;
	};

	gic: interrupt-controller@fe600000  {
		#address-cells = <1>;
		compatible = "arm,gic-v3", "arm,gic";
		reg = <0xfe600000 0x10000>, /* GICD */
		      <0xfe680000 0x100000>; /* GICR */
		interrupt-controller;
		#interrupt-cells = <4>;
		status = "okay";
	};

	sram0: memory@d400000 {
		reg = <0x0d400000 DT_SIZE_M(128)>;
	};
	
	psci {
		compatible = "arm,psci-0.2", "arm,psci";
		method = "smc";
	};

	timer {
		compatible = "arm,armv8-timer";
		interrupt-parent = <&gic>;
		interrupts = <GIC_PPI 13 IRQ_TYPE_LEVEL
			      IRQ_DEFAULT_PRIORITY>,
			     <GIC_PPI 14 IRQ_TYPE_LEVEL
			      IRQ_DEFAULT_PRIORITY>,
			     <GIC_PPI 11 IRQ_TYPE_LEVEL
			      IRQ_DEFAULT_PRIORITY>,
			     <GIC_PPI 10 IRQ_TYPE_LEVEL
			      IRQ_DEFAULT_PRIORITY>;
	};



	pinctrl: pinctrl@fd5f0000 {
		compatible = "rockchip,rk3588-pinctrl";
		status = "okay";

		reg = <0xfd5f0000 0x4000>,   /* PMU0GRF */
			<0xfd5f4000 0x4000>,   /* PMU1GRF */
			<0xfd5f8000 0x4000>,   /* PMU2GRF */
			<0xfd7c0000 0x4000>,   /* SYSGRF */
			<0xfd5e8000 0x4000>,   /* PMU0_IOC */
			<0xfd5ec000 0x4000>,   /* PMU1_IOC */
			<0xfd890000 0x4000>,   /* PMU2_IOC */
			<0xfd894000 0x4000>;   /* BUS_IOC */

		reg-names = "pmu0_grf", "pmu1_grf", "pmu2_grf", "sys_grf",
					"pmu0_ioc", "pmu1_ioc", "pmu2_ioc", "bus_ioc";
	};

	

	//"rockchip,rk3588-uart,rk3588s-uart",
	uart2: serial@feb50000 {
		compatible = "ns16550";
		reg = <0xfeb50000 0x1000>;
		interrupt-parent = <&gic>;
		interrupts = <GIC_SPI 333 IRQ_TYPE_LEVEL IRQ_DEFAULT_PRIORITY>;
		clock-frequency = <350000000>;
		reg-shift = <2>;
		status = "disabled";
		
	};

	/* GPIO CONFIG */

		gpio0: gpio@fd8a0000 {
			compatible = "rockchip,rk3588-gpio";
			reg = <0xfd8a0000 0x100>;
			interrupt-parent = <&gic>;
			interrupts = <GIC_SPI 277 4 0>;
			clocks = <&cru PCLK_GPIO0>, <&cru DBCLK_GPIO0>;
			gpio-controller;
			interrupt-controller;
			#gpio-cells = <2>;
			#interrupt-cells = <2>;
			ngpios = <32>;
		};

		gpio1: gpio@fec20000 {
			compatible = "rockchip,rk3588-gpio";
			reg = <0xfec20000 0x100>;
			interrupt-parent = <&gic>;
			interrupts = <GIC_SPI 278 4 0>;
			clocks = <&cru PCLK_GPIO1>, <&cru DBCLK_GPIO1>;
			gpio-controller;
			interrupt-controller;
			#gpio-cells = <2>;
			#interrupt-cells = <2>;
			ngpios = <32>;
		};

		gpio2: gpio@fec30000 {
			compatible = "rockchip,rk3588-gpio";
			reg = <0xfec30000 0x100>;
			interrupt-parent = <&gic>;
			interrupts = <GIC_SPI 279 4 0>;
			clocks = <&cru PCLK_GPIO2>, <&cru DBCLK_GPIO2>;
			gpio-controller;
			interrupt-controller;
			#gpio-cells = <2>;
			#interrupt-cells = <2>;
			ngpios = <32>;
		};

		gpio3: gpio@fec40000 {
			compatible = "rockchip,rk3588-gpio";
			reg = <0xfec40000 0x100>;
			interrupt-parent = <&gic>;
			interrupts = <GIC_SPI 280 4 0>;
			clocks = <&cru PCLK_GPIO3>, <&cru DBCLK_GPIO3>;
			gpio-controller;
			interrupt-controller;
			#gpio-cells = <2>;
			#interrupt-cells = <2>;
			ngpios = <32>;
		};

		gpio4: gpio@fec50000 {
			compatible = "rockchip,rk3588-gpio";
			reg = <0xfec50000 0x100>;
			interrupt-parent = <&gic>;
			interrupts = <GIC_SPI 281 4 0>;
			clocks = <&cru PCLK_GPIO4>, <&cru DBCLK_GPIO4>;
			gpio-controller;
			interrupt-controller;
			#gpio-cells = <2>;
			#interrupt-cells = <2>;
			ngpios = <32>;
		};

};

